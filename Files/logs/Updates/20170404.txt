improved prerequisites::Askchar(msg)
update C function source codes to C++ template function