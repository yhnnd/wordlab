<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Document</title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
	</head>
<body>
	<div class='container container-fluid'>
<pre style='color:#000000;background:#ffffff;'><span style='color:#800000; font-weight:bold; '>int</span> MessageWindow<span style='color:#800080; '>::</span>bsvviewer<span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>char</span> <span style='color:#808030; '>*</span>route<span style='color:#808030; '>,</span>bool _Animation<span style='color:#808030; '>,</span><span style='color:#800000; font-weight:bold; '>int</span> x<span style='color:#808030; '>,</span><span style='color:#800000; font-weight:bold; '>int</span> y<span style='color:#808030; '>,</span><span style='color:#800000; font-weight:bold; '>int</span> w<span style='color:#808030; '>,</span><span style='color:#800000; font-weight:bold; '>int</span> h<span style='color:#808030; '>,</span>bool <span style='color:#400000; '>select</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
	<span style='color:#800000; font-weight:bold; '>int</span> n <span style='color:#808030; '>=</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> width<span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>int</span> height <span style='color:#808030; '>=</span> fileLines<span style='color:#808030; '>(</span>route<span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>const</span> <span style='color:#800000; font-weight:bold; '>int</span> linemax <span style='color:#808030; '>=</span> <span style='color:#008c00; '>200</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>h<span style='color:#808030; '>></span><span style='color:#008c00; '>0</span><span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span>height<span style='color:#808030; '>></span>h<span style='color:#808030; '>)</span> height <span style='color:#808030; '>=</span> h<span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>height<span style='color:#808030; '>&lt;</span><span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
		alert<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>&lt;-wte>(data file lost</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>20</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>36</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>4</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
		<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>

	<span style='color:#800000; font-weight:bold; '>char</span> msgs<span style='color:#808030; '>[</span>height<span style='color:#808030; '>]</span><span style='color:#808030; '>[</span>linemax<span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
	loadmsg<span style='color:#808030; '>(</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>char</span><span style='color:#808030; '>*</span><span style='color:#808030; '>)</span>msgs<span style='color:#808030; '>,</span>route<span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>linemax<span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>height<span style='color:#808030; '>=</span><span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
		alert<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>&lt;-wte>(no data in file</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>20</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>36</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>4</span><span style='color:#808030; '>,</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
		<span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#008c00; '>0</span><span style='color:#800080; '>;</span>
	<span style='color:#800080; '>}</span>
	<span style='color:#603000; '>strcpy</span><span style='color:#808030; '>(</span>msgs<span style='color:#808030; '>[</span>height<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>exit</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

	width<span style='color:#808030; '>=</span>bsvmaxlths<span style='color:#808030; '>(</span>msgs<span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>&lt;</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>></span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>()</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>;</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>w<span style='color:#808030; '>></span><span style='color:#008c00; '>0</span><span style='color:#808030; '>&amp;</span><span style='color:#808030; '>&amp;</span>width<span style='color:#808030; '>></span>w<span style='color:#808030; '>)</span> width<span style='color:#808030; '>=</span>w<span style='color:#800080; '>;</span>

	bool background<span style='color:#808030; '>=</span>SetBackground<span style='color:#808030; '>(</span>true<span style='color:#808030; '>)</span><span style='color:#808030; '>,</span>monochrome<span style='color:#808030; '>=</span>SetMonochrome<span style='color:#808030; '>(</span>true<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>_Animation<span style='color:#808030; '>)</span> Show<span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>,</span>width<span style='color:#808030; '>,</span><span style='color:#808030; '>&amp;</span>msgs<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>linemax<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>else</span>        Frame<span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>,</span>width<span style='color:#808030; '>,</span><span style='color:#808030; '>&amp;</span>msgs<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>linemax<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#400000; '>select</span><span style='color:#808030; '>)</span> <span style='color:#800000; font-weight:bold; '>for</span><span style='color:#808030; '>(</span><span style='color:#800080; '>;</span><span style='color:#800080; '>;</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
			n<span style='color:#808030; '>=</span>Switch<span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>,</span>width<span style='color:#808030; '>,</span><span style='color:#808030; '>&amp;</span>msgs<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>w<span style='color:#808030; '>,</span>n<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
			<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>n<span style='color:#808030; '>=</span><span style='color:#808030; '>=</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>|</span><span style='color:#808030; '>|</span>n<span style='color:#808030; '>=</span><span style='color:#808030; '>=</span>height<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
		<span style='color:#800080; '>}</span> <span style='color:#800000; font-weight:bold; '>else</span> n<span style='color:#808030; '>=</span>getch<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

	<span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>_Animation<span style='color:#808030; '>)</span> Hide<span style='color:#808030; '>(</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>,</span>width<span style='color:#808030; '>,</span><span style='color:#808030; '>&amp;</span>msgs<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>linemax<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>else</span>       Frame<span style='color:#808030; '>(</span><span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span>x<span style='color:#808030; '>,</span>y<span style='color:#808030; '>,</span>width<span style='color:#808030; '>,</span><span style='color:#808030; '>&amp;</span>msgs<span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#808030; '>,</span>height<span style='color:#808030; '>,</span>linemax<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	SetMonochrome<span style='color:#808030; '>(</span>monochrome<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	SetBackground<span style='color:#808030; '>(</span>background<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
	<span style='color:#800000; font-weight:bold; '>return</span> n<span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>
	</div>
</body>
</html>
